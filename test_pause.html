<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–∞—É–∑—ã</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background: #222;
            color: white;
        }
        .controls {
            margin: 20px 0;
        }
        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 16px;
            cursor: pointer;
        }
        #status {
            margin: 20px 0;
            padding: 10px;
            background: #333;
            border-radius: 5px;
        }
        #log {
            background: #111;
            padding: 10px;
            border-radius: 5px;
            height: 200px;
            overflow-y: auto;
            font-family: monospace;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>üîç –¢–µ—Å—Ç –∫–Ω–æ–ø–∫–∏ –ø–∞—É–∑—ã</h1>
    
    <div class="controls">
        <button id="startButton">‚ñ∂ –°—Ç–∞—Ä—Ç</button>
        <button id="pauseButton">‚è∏ –ü–∞—É–∑–∞</button>
        <button id="stopButton">‚èπ –°—Ç–æ–ø</button>
    </div>
    
    <div id="status">
        <strong>–°—Ç–∞—Ç—É—Å:</strong> <span id="gameStatus">–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞</span><br>
        <strong>isActive:</strong> <span id="isActive">false</span><br>
        <strong>isPaused:</strong> <span id="isPaused">false</span><br>
        <strong>gameStarted:</strong> <span id="gameStarted">false</span>
    </div>
    
    <div id="log"></div>

    <script>
        // –ü—Ä–æ—Å—Ç–∞—è –∏–º–∏—Ç–∞—Ü–∏—è GameEngine –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
        class TestGameEngine {
            constructor() {
                this.isActive = false;
                this.isPaused = false;
                this.gameStarted = false;
                this.gameLoop = null;
                
                this.setupEventListeners();
                this.updateStatus();
            }
            
            setupEventListeners() {
                const startButton = document.getElementById('startButton');
                const pauseButton = document.getElementById('pauseButton');
                const stopButton = document.getElementById('stopButton');
                
                if (startButton) {
                    startButton.addEventListener('click', () => {
                        this.log('üîµ –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –°–¢–ê–†–¢');
                        this.startGame();
                    });
                }
                
                if (pauseButton) {
                    pauseButton.addEventListener('click', () => {
                        this.log('üü° –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –ü–ê–£–ó–ê');
                        this.pauseGame();
                    });
                }
                
                if (stopButton) {
                    stopButton.addEventListener('click', () => {
                        this.log('üî¥ –ù–∞–∂–∞—Ç–∞ –∫–Ω–æ–ø–∫–∞ –°–¢–û–ü');
                        this.stopGame();
                    });
                }
            }
            
            startGame() {
                if (this.isPaused) {
                    this.log('‚Ü™Ô∏è –í–æ–∑–æ–±–Ω–æ–≤–ª—è–µ–º –∏–≥—Ä—É –∏–∑ –ø–∞—É–∑—ã');
                    this.isPaused = false;
                    this.resumeGameLoop();
                } else {
                    this.log('üöÄ –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–æ–≤—É—é –∏–≥—Ä—É');
                    this.isActive = true;
                    this.gameStarted = true;
                    this.resumeGameLoop();
                }
                this.updateStatus();
            }
            
            pauseGame() {
                this.log(`‚è∏Ô∏è pauseGame() –≤—ã–∑–≤–∞–Ω. isActive: ${this.isActive}, isPaused: ${this.isPaused}`);
                
                if (!this.isActive) {
                    this.log('‚ùå –ò–≥—Ä–∞ –Ω–µ –∞–∫—Ç–∏–≤–Ω–∞, –ø–∞—É–∑–∞ –Ω–µ–≤–æ–∑–º–æ–∂–Ω–∞');
                    return;
                }
                
                this.isPaused = !this.isPaused;
                
                if (this.isPaused) {
                    this.log('‚è∏Ô∏è –ò–≥—Ä–∞ –ø—Ä–∏–æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞');
                    this.stopGameLoop();
                } else {
                    this.log('‚ñ∂Ô∏è –ò–≥—Ä–∞ –≤–æ–∑–æ–±–Ω–æ–≤–ª–µ–Ω–∞');
                    this.resumeGameLoop();
                }
                
                this.updateStatus();
            }
            
            stopGame() {
                this.log('üõë –û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –∏–≥—Ä—É');
                this.isActive = false;
                this.isPaused = false;
                this.gameStarted = false;
                this.stopGameLoop();
                this.updateStatus();
            }
            
            resumeGameLoop() {
                if (this.gameLoop) {
                    cancelAnimationFrame(this.gameLoop);
                }
                
                const loop = () => {
                    if (!this.isActive || this.isPaused) return;
                    // –ò–º–∏—Ç–∞—Ü–∏—è –∏–≥—Ä–æ–≤–æ–≥–æ —Ü–∏–∫–ª–∞
                    this.gameLoop = requestAnimationFrame(loop);
                };
                
                this.gameLoop = requestAnimationFrame(loop);
                this.log('üîÑ –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –∑–∞–ø—É—â–µ–Ω');
            }
            
            stopGameLoop() {
                if (this.gameLoop) {
                    cancelAnimationFrame(this.gameLoop);
                    this.gameLoop = null;
                    this.log('‚èπÔ∏è –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω');
                }
            }
            
            updateStatus() {
                document.getElementById('gameStatus').textContent = 
                    this.isPaused ? '–ù–∞ –ø–∞—É–∑–µ' : 
                    this.isActive ? '–ê–∫—Ç–∏–≤–Ω–∞' : '–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞';
                    
                document.getElementById('isActive').textContent = this.isActive;
                document.getElementById('isPaused').textContent = this.isPaused;
                document.getElementById('gameStarted').textContent = this.gameStarted;
            }
            
            log(message) {
                const logDiv = document.getElementById('log');
                const time = new Date().toLocaleTimeString();
                logDiv.innerHTML += `[${time}] ${message}<br>`;
                logDiv.scrollTop = logDiv.scrollHeight;
                console.log(message);
            }
        }
        
        // –°–æ–∑–¥–∞–µ–º —Ç–µ—Å—Ç–æ–≤—ã–π –¥–≤–∏–∂–æ–∫
        const testEngine = new TestGameEngine();
        
        // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
        document.addEventListener('DOMContentLoaded', () => {
            testEngine.log('‚úÖ DOM –∑–∞–≥—Ä—É–∂–µ–Ω, —Ç–µ—Å—Ç –≥–æ—Ç–æ–≤');
        });
    </script>
</body>
</html> 